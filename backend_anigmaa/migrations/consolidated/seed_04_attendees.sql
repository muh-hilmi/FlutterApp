-- ============================================================================
-- SEED 04: EVENT ATTENDEES
-- ============================================================================
-- Add attendees to the 10 events from seed_02_events.sql
-- Run seed_01_users.sql and seed_02_events.sql FIRST before this file
-- ============================================================================

-- Clear existing attendees (optional - comment out to keep existing)
-- DELETE FROM event_attendees WHERE event_id LIKE '22%';

-- ============================================================================
-- INSERT ATTENDEES FOR EACH EVENT
-- ============================================================================

-- Event 1: Coffee Meetup (8 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000001', '11000000-0000-0000-0000-000000000002', 'confirmed', NOW() - INTERVAL '5 days'),
('22000000-0000-0000-0000-000000000001', '11000000-0000-0000-0000-000000000003', 'confirmed', NOW() - INTERVAL '4 days'),
('22000000-0000-0000-0000-000000000001', '11000000-0000-0000-0000-000000000004', 'confirmed', NOW() - INTERVAL '3 days'),
('22000000-0000-0000-0000-000000000001', '11000000-0000-0000-0000-000000000007', 'confirmed', NOW() - INTERVAL '2 days'),
('22000000-0000-0000-0000-000000000001', '11000000-0000-0000-0000-00000000000a', 'confirmed', NOW() - INTERVAL '1 day'),
('22000000-0000-0000-0000-000000000001', '11000000-0000-0000-0000-000000000008', 'pending', NOW() - INTERVAL '12 hours'),
('22000000-0000-0000-0000-000000000001', '11000000-0000-0000-0000-000000000005', 'pending', NOW() - INTERVAL '6 hours'),
('22000000-0000-0000-0000-000000000001', '11000000-0000-0000-0000-00000000000b', 'pending', NOW() - INTERVAL '2 hours')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 2: Gaming Workshop (12 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000002', '11000000-0000-0000-0000-000000000005', 'confirmed', NOW() - INTERVAL '10 days'),
('22000000-0000-0000-0000-000000000002', '11000000-0000-0000-0000-000000000006', 'confirmed', NOW() - INTERVAL '9 days'),
('22000000-0000-0000-0000-000000000002', '11000000-0000-0000-0000-000000000003', 'confirmed', NOW() - INTERVAL '8 days'),
('22000000-0000-0000-0000-000000000002', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '7 days'),
('22000000-0000-0000-0000-000000000002', '11000000-0000-0000-0000-000000000002', 'confirmed', NOW() - INTERVAL '6 days'),
('22000000-0000-0000-0000-000000000002', '11000000-0000-0000-0000-000000000007', 'confirmed', NOW() - INTERVAL '5 days'),
('22000000-0000-0000-0000-000000000002', '11000000-0000-0000-0000-00000000000a', 'confirmed', NOW() - INTERVAL '4 days'),
('22000000-0000-0000-0000-000000000002', '11000000-0000-0000-0000-00000000000d', 'confirmed', NOW() - INTERVAL '3 days')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 3: Street Food (10 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000003', '11000000-0000-0000-0000-000000000014', 'confirmed', NOW() - INTERVAL '8 days'),
('22000000-0000-0000-0000-000000000003', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '7 days'),
('22000000-0000-0000-0000-000000000003', '11000000-0000-0000-0000-000000000008', 'confirmed', NOW() - INTERVAL '6 days'),
('22000000-0000-0000-0000-000000000003', '11000000-0000-0000-0000-000000000003', 'confirmed', NOW() - INTERVAL '5 days'),
('22000000-0000-0000-0000-000000000003', '11000000-0000-0000-0000-000000000007', 'confirmed', NOW() - INTERVAL '4 days'),
('22000000-0000-0000-0000-000000000003', '11000000-0000-0000-0000-00000000000a', 'confirmed', NOW() - INTERVAL '3 days'),
('22000000-0000-0000-0000-000000000003', '11000000-0000-0000-0000-000000000019', 'pending', NOW() - INTERVAL '2 days'),
('22000000-0000-0000-0000-000000000003', '11000000-0000-0000-0000-000000000016', 'pending', NOW() - INTERVAL '1 day')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 4: React Workshop (15 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-000000000005', 'confirmed', NOW() - INTERVAL '15 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-000000000003', 'confirmed', NOW() - INTERVAL '14 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '13 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-000000000002', 'confirmed', NOW() - INTERVAL '12 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-000000000004', 'confirmed', NOW() - INTERVAL '11 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-000000000007', 'confirmed', NOW() - INTERVAL '10 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-00000000000a', 'confirmed', NOW() - INTERVAL '9 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-000000000010', 'confirmed', NOW() - INTERVAL '8 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-000000000009', 'pending', NOW() - INTERVAL '3 days'),
('22000000-0000-0000-0000-000000000004', '11000000-0000-0000-0000-00000000000b', 'pending', NOW() - INTERVAL '2 days')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 5: Running Club (20 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000005', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '12 days'),
('22000000-0000-0000-0000-000000000005', '11000000-0000-0000-0000-000000000002', 'confirmed', NOW() - INTERVAL '11 days'),
('22000000-0000-0000-0000-000000000005', '11000000-0000-0000-0000-00000000000b', 'confirmed', NOW() - INTERVAL '10 days'),
('22000000-0000-0000-0000-000000000005', '11000000-0000-0000-0000-00000000000c', 'confirmed', NOW() - INTERVAL '9 days'),
('22000000-0000-0000-0000-000000000005', '11000000-0000-0000-0000-000000000016', 'confirmed', NOW() - INTERVAL '8 days'),
('22000000-0000-0000-0000-000000000005', '11000000-0000-0000-0000-00000000000d', 'confirmed', NOW() - INTERVAL '7 days'),
('22000000-0000-0000-0000-000000000005', '11000000-0000-0000-0000-000000000017', 'pending', NOW() - INTERVAL '3 days'),
('22000000-0000-0000-0000-000000000005', '11000000-0000-0000-0000-00000000000a', 'pending', NOW() - INTERVAL '2 days')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 6: Photography (12 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000006', '11000000-0000-0000-0000-000000000008', 'confirmed', NOW() - INTERVAL '10 days'),
('22000000-0000-0000-0000-000000000006', '11000000-0000-0000-0000-000000000018', 'confirmed', NOW() - INTERVAL '9 days'),
('22000000-0000-0000-0000-000000000006', '11000000-0000-0000-0000-000000000007', 'confirmed', NOW() - INTERVAL '8 days'),
('22000000-0000-0000-0000-000000000006', '11000000-0000-0000-0000-000000000002', 'confirmed', NOW() - INTERVAL '7 days'),
('22000000-0000-0000-0000-000000000006', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '6 days'),
('22000000-0000-0000-0000-000000000006', '11000000-0000-0000-0000-000000000009', 'confirmed', NOW() - INTERVAL '5 days'),
('22000000-0000-0000-0000-000000000006', '11000000-0000-0000-0000-000000000015', 'pending', NOW() - INTERVAL '2 days'),
('22000000-0000-0000-0000-000000000006', '11000000-0000-0000-0000-000000000004', 'pending', NOW() - INTERVAL '1 day')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 7: Indie Music (15 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000007', '11000000-0000-0000-0000-00000000000f', 'confirmed', NOW() - INTERVAL '12 days'),
('22000000-0000-0000-0000-000000000007', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '11 days'),
('22000000-0000-0000-0000-000000000007', '11000000-0000-0000-0000-000000000007', 'confirmed', NOW() - INTERVAL '10 days'),
('22000000-0000-0000-0000-000000000007', '11000000-0000-0000-0000-000000000008', 'confirmed', NOW() - INTERVAL '9 days'),
('22000000-0000-0000-0000-000000000007', '11000000-0000-0000-0000-000000000017', 'pending', NOW() - INTERVAL '3 days'),
('22000000-0000-0000-0000-000000000007', '11000000-0000-0000-0000-00000000000e', 'pending', NOW() - INTERVAL '2 days')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 8: KBBQ (18 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000008', '11000000-0000-0000-0000-000000000002', 'confirmed', NOW() - INTERVAL '10 days'),
('22000000-0000-0000-0000-000000000008', '11000000-0000-0000-0000-000000000007', 'confirmed', NOW() - INTERVAL '9 days'),
('22000000-0000-0000-0000-000000000008', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '8 days'),
('22000000-0000-0000-0000-000000000008', '11000000-0000-0000-0000-00000000000a', 'confirmed', NOW() - INTERVAL '7 days'),
('22000000-0000-0000-0000-000000000008', '11000000-0000-0000-0000-000000000008', 'pending', NOW() - INTERVAL '2 days'),
('22000000-0000-0000-0000-000000000008', '11000000-0000-0000-0000-000000000004', 'pending', NOW() - INTERVAL '1 day')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 9: Yoga (8 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-000000000009', '11000000-0000-0000-0000-000000000003', 'confirmed', NOW() - INTERVAL '8 days'),
('22000000-0000-0000-0000-000000000009', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '7 days'),
('22000000-0000-0000-0000-000000000009', '11000000-0000-0000-0000-000000000013', 'confirmed', NOW() - INTERVAL '6 days'),
('22000000-0000-0000-0000-000000000009', '11000000-0000-0000-0000-000000000010', 'confirmed', NOW() - INTERVAL '5 days'),
('22000000-0000-0000-0000-000000000009', '11000000-0000-0000-0000-000000000014', 'pending', NOW() - INTERVAL '2 days'),
('22000000-0000-0000-0000-000000000009', '11000000-0000-0000-0000-00000000000b', 'pending', NOW() - INTERVAL '1 day')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- Event 10: Basketball (16 attendees)
INSERT INTO event_attendees (event_id, user_id, status, joined_at) VALUES
('22000000-0000-0000-0000-00000000000a', '11000000-0000-0000-0000-00000000000d', 'confirmed', NOW() - INTERVAL '12 days'),
('22000000-0000-0000-0000-00000000000a', '11000000-0000-0000-0000-000000000019', 'confirmed', NOW() - INTERVAL '11 days'),
('22000000-0000-0000-0000-00000000000a', '11000000-0000-0000-0000-00000000000c', 'confirmed', NOW() - INTERVAL '10 days'),
('22000000-0000-0000-0000-00000000000a', '11000000-0000-0000-0000-000000000001', 'confirmed', NOW() - INTERVAL '9 days'),
('22000000-0000-0000-0000-00000000000a', '11000000-0000-0000-0000-000000000011', 'pending', NOW() - INTERVAL '3 days'),
('22000000-0000-0000-0000-00000000000a', '11000000-0000-0000-0000-00000000000a', 'pending', NOW() - INTERVAL '2 days')
ON CONFLICT (event_id, user_id) DO NOTHING;

-- ============================================================================
-- UPDATE ATTENDEE COUNTS ON EVENTS
-- ============================================================================

UPDATE events e SET attendees_count = (
    SELECT COUNT(*) FROM event_attendees ea
    WHERE ea.event_id = e.id AND ea.status = 'confirmed')
WHERE e.host_id IN (SELECT id FROM users WHERE email LIKE '%anigmaa.com');

-- ============================================================================
-- SUMMARY
-- ============================================================================
-- Total Attendees added: ~100 across 10 events
-- Each event has 6-20 attendees (mix of confirmed & pending)
-- Event attendee_counts are now updated
-- ============================================================================
